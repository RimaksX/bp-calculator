<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>BP Calc</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@500;700&family=Onest:wght@400;500;600;700&display=swap" rel="stylesheet"/>
<style>
:root {
  --bg:        #0e0e0e;
  --card:      #161616;
  --card2:     #1c1c1c;
  --line:      #252525;
  --line2:     #2e2e2e;
  --t1:        #f0f0f0;
  --t2:        #8a8a9a;
  --t3:        #555565;
  --lime:      #d4f53c;
  --lime-bg:   rgba(212,245,60,.08);
  --lime-br:   rgba(212,245,60,.22);
  --green:     #3ecf8e;
  --green-bg:  rgba(62,207,142,.08);
  --green-br:  rgba(62,207,142,.2);
  --blue:      #5b9cf6;
  --blue-bg:   rgba(91,156,246,.10);
  --blue-br:   rgba(91,156,246,.25);
  --red:       #f05151;
  --red-bg:    rgba(240,81,81,.08);
  --red-br:    rgba(240,81,81,.18);
  --orange:    #f5a623;
  --orange-bg: rgba(245,166,35,.08);
  --orange-br: rgba(245,166,35,.22);
  --r:  12px;
  --r2:  8px;
  --r3:  6px;
  --mono: 'JetBrains Mono', monospace;
  --body: 'Onest', sans-serif;
  --safe: env(safe-area-inset-bottom, 0px);
}
*,*::before,*::after { box-sizing:border-box; margin:0; padding:0 }
html,body {
  height:100%; background:var(--bg); color:var(--t1);
  font-family:var(--body); font-size:14px; line-height:1.5;
  -webkit-font-smoothing:antialiased; overflow-x:hidden;
}
::-webkit-scrollbar { width:2px }
::-webkit-scrollbar-thumb { background:var(--line2) }
input[type=number] { -moz-appearance:textfield }
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button { -webkit-appearance:none }

.page { display:flex; flex-direction:column; min-height:100dvh }
.scroll { flex:1; overflow-y:auto; padding:10px 10px calc(152px + var(--safe)) }

.hdr {
  display:flex; align-items:center; justify-content:space-between;
  padding:14px 12px 12px; border-bottom:1px solid var(--line);
  position:sticky; top:0; z-index:20; background:var(--bg);
}
.hdr-logo { font-family:var(--mono); font-size:15px; font-weight:700; color:var(--t1); letter-spacing:-.5px }
.hdr-logo em { color:var(--lime); font-style:normal }
.hdr-right { display:flex; gap:6px; align-items:center }
.btn-icon {
  display:flex; align-items:center; justify-content:center;
  width:32px; height:32px; border-radius:var(--r3);
  border:1px solid var(--line2); background:var(--card);
  color:var(--t2); font-size:15px; cursor:pointer; transition:all .15s;
}
.btn-icon:active { opacity:.6; transform:scale(.92) }
.btn-icon.settings-open { background:var(--orange-bg); border-color:var(--orange-br); color:var(--orange) }
.btn-reset {
  font-size:12px; font-weight:600; font-family:var(--body);
  color:var(--red); background:var(--red-bg); border:1px solid var(--red-br);
  border-radius:20px; padding:5px 12px; cursor:pointer; transition:opacity .15s;
}
.btn-reset:active { opacity:.55 }

.bento { display:grid; grid-template-columns:1fr 1fr; gap:6px; margin-bottom:8px }
.ben { background:var(--card); border:1px solid var(--line); border-radius:var(--r); padding:11px 12px }
.ben-full { grid-column:1/-1 }
.ben-lbl { font-size:10px; font-weight:700; color:#6e6e82; text-transform:uppercase; letter-spacing:1px; margin-bottom:8px }

.bal-row { display:flex; align-items:center; gap:6px }
.bal-sym { font-family:var(--mono); font-size:12px; color:var(--t3) }
.bal-inp {
  flex:1; background:var(--card2); border:1px solid var(--line2); border-radius:var(--r2);
  color:var(--t1); font-family:var(--mono); font-size:18px; font-weight:700;
  padding:7px 10px; outline:none; width:100%; transition:border-color .15s, box-shadow .15s;
}
.bal-inp:focus { border-color:var(--lime); box-shadow:0 0 0 3px rgba(212,245,60,.08) }

.vip-pills { display:flex; gap:5px }
.vip-pill {
  flex:1; padding:7px 0; border-radius:var(--r2); border:1px solid var(--line2); background:var(--card2);
  font-family:var(--body); font-size:11.5px; font-weight:700; color:var(--t2);
  cursor:pointer; transition:all .15s; text-align:center; letter-spacing:-.1px;
}
.vip-pill:active { transform:scale(.95) }
.vip-pill.act-off { color:var(--t1); border-color:var(--line2); background:var(--card2) }
.vip-pill.act-on  { color:var(--lime); border-color:var(--lime-br); background:var(--lime-bg) }

.x2-row { display:flex; align-items:center; justify-content:space-between; cursor:pointer; user-select:none }
.x2-label { display:flex; align-items:center; gap:8px; font-family:var(--mono); font-size:17px; font-weight:700; color:var(--t3); transition:color .2s }
.x2-state { font-size:11px; font-weight:600; color:var(--t3); font-family:var(--body); transition:color .2s }
.ben.x2-on { border-color:var(--lime-br); background:var(--lime-bg) }
.ben.x2-on .x2-label { color:var(--lime) }
.ben.x2-on .x2-state { color:var(--lime) }
.sw { width:36px; height:20px; background:var(--line2); border-radius:10px; position:relative; transition:background .2s; flex-shrink:0 }
.ben.x2-on .sw { background:var(--lime) }
.sw-knob {
  position:absolute; top:3px; left:3px; width:14px; height:14px; background:#fff; border-radius:50%;
  box-shadow:0 1px 3px rgba(0,0,0,.5); transition:transform .2s cubic-bezier(.34,1.56,.64,1);
}
.ben.x2-on .sw-knob { transform:translateX(16px) }

.sec { margin-bottom:18px }
.sec-hdr { display:flex; align-items:center; gap:7px; margin-bottom:8px; padding:0 1px }
.sec-ico  { font-size:13px; flex-shrink:0 }
.sec-name { font-size:10px; font-weight:700; color:#6e6e82; text-transform:uppercase; letter-spacing:.9px }
.sec-sep  { flex:1; height:1px; background:var(--line) }
.sec-sum  { font-family:var(--mono); font-size:12px; font-weight:700; color:var(--t3); transition:color .2s; min-width:36px; text-align:right }
.sec-sum.on { color:var(--green) }

.acts { display:flex; flex-direction:column; gap:6px }
.act-wrap { display:flex; flex-direction:column }
.act {
  display:flex; align-items:center; gap:10px;
  background:var(--card); border:1px solid #2f2f2f;
  border-radius:var(--r2); padding:12px;
  cursor:pointer; user-select:none; -webkit-tap-highlight-color:transparent;
  transition:background .12s, border-color .12s, border-radius .15s;
  min-height:48px;
}
.act:active { transform:scale(.988) }
.act.chk    { background:var(--green-bg); border-color:var(--green-br) }
.act.chk-x2 { background:var(--lime-bg);  border-color:var(--lime-br)  }
.act.hint-open { border-bottom-left-radius:0; border-bottom-right-radius:0; border-bottom-color:transparent }

.chkbox {
  width:20px; height:20px; flex-shrink:0; border:1.5px solid var(--line2); border-radius:6px;
  display:flex; align-items:center; justify-content:center; transition:all .15s;
}
.act.chk    .chkbox { background:var(--green); border-color:var(--green) }
.act.chk-x2 .chkbox { background:var(--lime);  border-color:var(--lime)  }
.chk-ico {
  opacity:0; transform:scale(.3);
  transition:all .15s cubic-bezier(.34,1.56,.64,1);
  font-size:11px; color:#000; font-weight:700; line-height:1;
}
.act.chk .chk-ico, .act.chk-x2 .chk-ico { opacity:1; transform:scale(1) }

.act-name {
  flex:1; font-size:13.5px; font-weight:500; color:var(--t2);
  transition:color .12s; min-width:0; line-height:1.4; padding-top:1px;
}
.act.chk    .act-name { color:var(--green) }
.act.chk-x2 .act-name { color:var(--lime)  }

.act-pts {
  font-family:var(--mono); font-size:14px; font-weight:700; color:var(--t3);
  flex-shrink:0; min-width:26px; text-align:right; transition:color .12s;
}
.act.chk    .act-pts { color:var(--green) }
.act.chk-x2 .act-pts { color:var(--lime)  }

.hint-btn {
  display:flex; align-items:center; justify-content:center;
  width:28px; height:28px; border-radius:50%; flex-shrink:0;
  background:var(--card2); border:1px solid #3a3a4e;
  color:#6a6a88; cursor:pointer; transition:all .15s; position:relative;
}
.hint-btn::before { content:''; position:absolute; inset:-8px; border-radius:50% }
.hint-btn svg { display:block; transition:all .15s; pointer-events:none }
.hint-btn:active { transform:scale(.88) }
.hint-btn.open { background:var(--blue-bg); border-color:var(--blue-br) }
.hint-btn.open svg { color:var(--blue) }

.hint-panel {
  background:transparent;
  border-left:1px solid transparent; border-right:1px solid transparent; border-bottom:1px solid transparent;
  border-bottom-left-radius:var(--r2); border-bottom-right-radius:var(--r2);
  overflow:hidden; max-height:0;
  transition:max-height .25s cubic-bezier(.4,0,.2,1), border-color .25s cubic-bezier(.4,0,.2,1);
}
.hint-panel.open {
  max-height:220px; background:var(--card2);
  border-left-color:var(--line); border-right-color:var(--line); border-bottom-color:var(--line);
}
.hint-inner { padding:10px 12px 11px; border-top:1px solid var(--line); display:flex; gap:9px; align-items:flex-start }
.hint-icon  { font-size:13px; flex-shrink:0; margin-top:1px; opacity:.55 }
.hint-text  { font-size:12.5px; color:#8a8a9a; line-height:1.6; font-weight:400 }
.hint-text b { color:var(--t1); font-weight:600 }

.panel {
  position:fixed; bottom:0; left:0; right:0; z-index:30;
  padding:8px 10px; padding-bottom:calc(8px + var(--safe));
  background:linear-gradient(to top, var(--bg) 50%, transparent);
  pointer-events:none;
}
.panel-card {
  background:var(--card); border:1px solid var(--line); border-radius:var(--r);
  overflow:hidden; pointer-events:all; box-shadow:0 -4px 24px rgba(0,0,0,.55);
}
.pbar  { height:2px; background:var(--line2) }
.pfill { height:100%; background:linear-gradient(to right,var(--green),var(--lime)); transition:width .3s ease; width:0 }
.stats { display:grid; grid-template-columns:1fr 1fr 1fr; border-bottom:1px solid var(--line) }
.st    { padding:8px 10px; border-right:1px solid var(--line) }
.st:last-child { border-right:none }
.st-lbl { font-size:9px; font-weight:700; color:#6e6e82; text-transform:uppercase; letter-spacing:.7px; margin-bottom:2px }
.st-val { font-family:var(--mono); font-size:18px; font-weight:700; line-height:1; transition:transform .15s }
.st-val.c1 { color:var(--t2) }
.st-val.c2 { color:var(--lime) }
.st-val.c3 { color:var(--green) }
.tot-row { display:flex; align-items:center; justify-content:space-between; padding:9px 12px }
.tot-lbl  { font-size:11px; font-weight:600; color:#8a8a9a }
.tot-val  { font-family:var(--mono); font-size:28px; font-weight:700; color:var(--lime); line-height:1; text-shadow:0 0 18px rgba(212,245,60,.3) }
.tot-unit { font-family:var(--mono); font-size:11px; color:var(--t3); margin-left:3px }

.settings-overlay {
  position:fixed; inset:0; z-index:50;
  background:rgba(0,0,0,.6); backdrop-filter:blur(6px);
  opacity:0; pointer-events:none; transition:opacity .2s;
}
.settings-overlay.vis { opacity:1; pointer-events:all }
.settings-sheet {
  position:absolute; top:0; right:0; bottom:0; width:min(340px, 100vw);
  background:var(--bg); border-left:1px solid var(--line);
  display:flex; flex-direction:column;
  transform:translateX(100%); transition:transform .28s cubic-bezier(.32,.72,0,1);
}
.settings-overlay.vis .settings-sheet { transform:translateX(0) }
.settings-hdr {
  display:flex; align-items:center; justify-content:space-between;
  padding:16px 14px 12px; border-bottom:1px solid var(--line); flex-shrink:0;
}
.settings-title { font-size:15px; font-weight:700 }
.btn-close {
  display:flex; align-items:center; justify-content:center;
  width:28px; height:28px; border-radius:var(--r3); border:1px solid var(--line2);
  background:var(--card); color:var(--t2); font-size:14px; cursor:pointer; transition:all .15s;
}
.btn-close:active { opacity:.6 }
.settings-scroll { flex:1; overflow-y:auto; padding:10px 14px calc(12px + var(--safe)) }
.settings-desc {
  font-size:12.5px; color:#8a8a9a; line-height:1.6; margin-bottom:14px;
  padding:11px 13px; background:var(--card); border:1px solid #2f2f2f; border-radius:var(--r2);
}

.stg-sec { margin-bottom:16px }
.stg-sec-hdr { display:flex; align-items:center; justify-content:space-between; margin-bottom:6px }
.stg-sec-name { font-size:11px; font-weight:700; color:#6e6e82; text-transform:uppercase; letter-spacing:.8px }
.stg-bulk { display:flex; gap:4px }
.stg-bulk-btn {
  font-size:10px; font-weight:700; font-family:var(--body);
  color:#6e6e82; background:var(--card); border:1px solid #3a3a4e;
  border-radius:var(--r3); padding:4px 10px; cursor:pointer; transition:all .15s;
}
.stg-bulk-btn:hover { color:var(--t2); border-color:var(--line2) }
.stg-bulk-btn:active { transform:scale(.93) }

.stg-row {
  display:flex; align-items:center; gap:12px;
  padding:11px 12px; background:var(--card); border:1px solid #2f2f2f;
  border-radius:var(--r2); margin-bottom:4px; min-height:44px;
  transition:opacity .15s, transform .22s cubic-bezier(.34,.9,.46,1);
  will-change:transform;
}
.stg-row.hidden-row { opacity:.45 }
.stg-row.dnd-ghost  { visibility:hidden }
.stg-row-name { flex:1; font-size:13px; font-weight:500; color:var(--t2); min-width:0; line-height:1.35 }
.stg-row-pts  { font-family:var(--mono); font-size:12px; color:#555565; flex-shrink:0; margin-right:4px }

.stg-sw { width:36px; height:20px; background:var(--line2); border-radius:10px; position:relative; flex-shrink:0; cursor:pointer; transition:background .2s }
.stg-sw.on { background:var(--green) }
.stg-sw-k {
  position:absolute; top:3px; left:3px; width:14px; height:14px; background:#fff; border-radius:50%;
  box-shadow:0 1px 3px rgba(0,0,0,.4); transition:transform .2s cubic-bezier(.34,1.56,.64,1);
}
.stg-sw.on .stg-sw-k { transform:translateX(16px) }

.settings-footer { padding:10px 14px calc(10px + var(--safe)); border-top:1px solid var(--line); flex-shrink:0; display:flex; flex-direction:column; gap:8px }
.btn-reset-settings {
  width:100%; padding:11px; border-radius:var(--r2);
  border:1px solid var(--orange-br); background:var(--orange-bg);
  font-family:var(--body); font-size:13px; font-weight:700;
  color:var(--orange); cursor:pointer; transition:opacity .15s;
}
.btn-reset-settings:active { opacity:.6 }

.stg-drag {
  display:flex; align-items:center; justify-content:center;
  width:32px; height:32px; flex-shrink:0;
  cursor:grab; touch-action:none;
  border-radius:var(--r3); color:#4a4a62;
  transition:color .15s; position:relative;
}
.stg-drag::before { content:''; position:absolute; inset:-8px }
.stg-drag:active  { cursor:grabbing; color:#7a7a9a }
.stg-drag svg     { pointer-events:none; display:block }

.stg-clone {
  position:fixed; z-index:999; pointer-events:none;
  left:0; top:0; display:flex; align-items:center; gap:12px;
  padding:11px 12px; min-height:44px; border-radius:var(--r2);
  background:#1c1c2e; border:1.5px solid rgba(91,156,246,.4);
  box-shadow:0 20px 60px rgba(0,0,0,.8), 0 0 0 1px rgba(91,156,246,.1);
  will-change:transform; box-sizing:border-box; overflow:hidden;
}
.stg-clone-handle {
  display:flex; align-items:center; justify-content:center;
  width:32px; height:32px; flex-shrink:0; color:#6a6a9a;
}
.stg-clone-name {
  flex:1; font-family:'Onest',sans-serif; font-size:13px; font-weight:500;
  color:#8a8a9a; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; min-width:0;
}
.stg-clone-pts { font-family:'JetBrains Mono',monospace; font-size:12px; color:#555565; flex-shrink:0; margin-right:4px }
.stg-clone-sw {
  width:36px; height:20px; border-radius:10px; flex-shrink:0;
  background:var(--line2); opacity:.75; position:relative;
}
.stg-clone-sw::after {
  content:''; position:absolute; top:3px; left:3px;
  width:14px; height:14px; border-radius:50%;
  background:#fff; box-shadow:0 1px 3px rgba(0,0,0,.4);
}
.stg-clone-sw.on { background:var(--green) }
.stg-clone-sw.on::after { transform:translateX(16px) }

.overlay {
  position:fixed; inset:0; z-index:100; background:rgba(0,0,0,.7); backdrop-filter:blur(8px);
  display:flex; align-items:flex-end; opacity:0; pointer-events:none; transition:opacity .2s;
}
.overlay.vis { opacity:1; pointer-events:all }
.sheet {
  width:100%; background:var(--card); border:1px solid var(--line);
  border-bottom:none; border-radius:var(--r) var(--r) 0 0;
  padding:18px 14px calc(18px + var(--safe));
  transform:translateY(100%); transition:transform .25s cubic-bezier(.32,.72,0,1);
}
.overlay.vis .sheet { transform:translateY(0) }
.sh-handle { width:32px; height:3px; background:var(--line2); border-radius:2px; margin:0 auto 16px; opacity:.6 }
.sh-title  { font-size:16px; font-weight:700; margin-bottom:4px }
.sh-desc   { font-size:12px; color:var(--t2); margin-bottom:18px; line-height:1.6 }
.sh-btns   { display:flex; gap:8px }
.sh-btn    { flex:1; padding:13px; border-radius:var(--r2); border:1px solid var(--line2); font-family:var(--body); font-size:13px; font-weight:700; cursor:pointer; transition:opacity .15s }
.sh-btn:active { opacity:.6 }
.sh-cancel { background:var(--card2); color:var(--t2) }
.sh-ok     { background:var(--red-bg); color:var(--red); border-color:var(--red-br) }

@keyframes pg   { 0%{box-shadow:0 0 0 0 rgba(62,207,142,.4)}  70%{box-shadow:0 0 0 6px rgba(62,207,142,0)}  100%{box-shadow:0 0 0 0 rgba(62,207,142,0)}  }
@keyframes pl   { 0%{box-shadow:0 0 0 0 rgba(212,245,60,.4)}   70%{box-shadow:0 0 0 6px rgba(212,245,60,0)}   100%{box-shadow:0 0 0 0 rgba(212,245,60,0)}   }
@keyframes spin { to { transform:rotate(360deg) } }
.pulse-g { animation:pg .35s ease }
.pulse-l { animation:pl .35s ease }
</style>
</head>
<body>
<div class="page">

<header class="hdr">
  <div class="hdr-logo">BP<em>//</em>calc</div>
  <div class="hdr-right">
    <button class="btn-icon" id="btnSettings">‚öô</button>
    <button class="btn-reset" id="btnReset">‚Ü∫ –°–±—Ä–æ—Å</button>
  </div>
</header>

<div id="loader" style="display:none;position:fixed;inset:0;z-index:40;background:var(--bg);align-items:center;justify-content:center;flex-direction:column;gap:12px">
  <div style="width:28px;height:28px;border:2.5px solid var(--line2);border-top-color:var(--lime);border-radius:50%;animation:spin .7s linear infinite"></div>
  <span style="font-family:var(--mono);font-size:12px;color:#555565;letter-spacing:.5px">–∑–∞–≥—Ä—É–∑–∫–∞...</span>
</div>

<div class="scroll">
  <div class="bento">
    <div class="ben ben-full">
      <div class="ben-lbl">–ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å BP</div>
      <div class="bal-row">
        <span class="bal-sym">‚óÜ</span>
        <input class="bal-inp" id="balInp" type="number" inputmode="numeric" placeholder="0" min="0" max="999999"/>
      </div>
    </div>
    <div class="ben">
      <div class="ben-lbl">VIP —Å—Ç–∞—Ç—É—Å</div>
      <div class="vip-pills">
        <button class="vip-pill act-off" data-v="0">–ù–µ—Ç VIP</button>
        <button class="vip-pill"         data-v="1">Platinum</button>
      </div>
    </div>
    <div class="ben" id="x2Ben">
      <div class="ben-lbl">–ê–∫—Ü–∏—è √ó2</div>
      <div class="x2-row" id="x2Row">
        <div class="x2-label">√ó2 <span class="x2-state" id="x2Txt">–≤—ã–∫–ª</span></div>
        <div class="sw"><div class="sw-knob"></div></div>
      </div>
    </div>
  </div>
  <div id="root"></div>
</div>

<div class="panel">
  <div class="panel-card">
    <div class="pbar"><div class="pfill" id="pfill"></div></div>
    <div class="stats">
      <div class="st"><div class="st-lbl">–ë–∞–∑–∞</div><div class="st-val c1" id="vBase">0</div></div>
      <div class="st"><div class="st-lbl">–ë–æ–Ω—É—Å</div><div class="st-val c2" id="vBonus">+0</div></div>
      <div class="st"><div class="st-lbl">–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ</div><div class="st-val c3" id="vEarned">0</div></div>
    </div>
    <div class="tot-row">
      <span class="tot-lbl">–ò—Ç–æ–≥–æ —Å –±–∞–ª–∞–Ω—Å–æ–º</span>
      <div><span class="tot-val" id="vTotal">0</span><span class="tot-unit">BP</span></div>
    </div>
  </div>
</div>
</div>

<div class="settings-overlay" id="settingsOverlay">
  <div class="settings-sheet">
    <div class="settings-hdr">
      <span class="settings-title">‚öô –ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
      <button class="btn-close" id="btnCloseSettings">‚úï</button>
    </div>
    <div class="settings-scroll">
      <div class="settings-desc">
        –°–∫—Ä–æ–π—Ç–µ –Ω–µ–Ω—É–∂–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è ‚Äî –æ–Ω–∏ –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ —Ä–∞—Å—á—ë—Ç–µ BP.<br>–ó–∞–∂–º–∏ <b style="color:#5b9cf6">‚†ø</b> —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫.
      </div>
      <div id="settingsRoot"></div>
    </div>
    <div class="settings-footer">
      <button class="btn-reset-settings" id="btnShowAll">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∑–∞–¥–∞–Ω–∏—è</button>
      <button class="btn-reset-settings" id="btnResetOrder" style="border-color:rgba(91,156,246,.25);background:rgba(91,156,246,.08);color:#5b9cf6">–°–±—Ä–æ—Å–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –∑–∞–¥–∞–Ω–∏–π</button>
    </div>
  </div>
</div>

<div class="overlay" id="modal">
  <div class="sheet">
    <div class="sh-handle"></div>
    <div class="sh-title">–°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å?</div>
    <div class="sh-desc">–í—Å–µ –æ—Ç–º–µ—Ç–∫–∏ –∏ –Ω–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –æ–±–Ω—É–ª—è—Ç—Å—è.<br>VIP, –∞–∫—Ü–∏—è √ó2 –∏ —Å–∫—Ä—ã—Ç—ã–µ –∑–∞–¥–∞–Ω–∏—è –Ω–µ –∏–∑–º–µ–Ω—è—Ç—Å—è.</div>
    <div class="sh-btns">
      <button class="sh-btn sh-cancel" id="mNo">–û—Ç–º–µ–Ω–∞</button>
      <button class="sh-btn sh-ok"     id="mYes">–°–±—Ä–æ—Å–∏—Ç—å</button>
    </div>
  </div>
</div>

<script>
const tg = window.Telegram?.WebApp;
if (tg) { tg.ready(); tg.expand(); }
const haptic = () => tg?.HapticFeedback?.impactOccurred('light');
const hNote  = () => tg?.HapticFeedback?.notificationOccurred('warning');
const hSel   = () => tg?.HapticFeedback?.selectionChanged();

const CATS = [
  {
    id:'gen', name:'–û–±—â–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏', icon:'‚ö°',
    acts:[
      {
        id:'g01',
        name:'3 —á–∞—Å–∞ –æ–Ω–ª–∞–π–Ω–∞',
        hint:'–ü—Ä–æ–≤–µ–¥–∏—Ç–µ —Å—É–º–º–∞—Ä–Ω–æ <b>3 —á–∞—Å–∞</b> –≤ –∏–≥—Ä–µ –∑–∞ –¥–µ–Ω—å ‚Äî —á–∞—Å—ã –º–æ–∂–Ω–æ –Ω–∞–±–∏—Ä–∞—Ç—å —á–∞—Å—Ç—è–º–∏, —Å—Ç–æ—è—Ç—å AFK –Ω–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è. –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑ –≤ –¥–µ–Ω—å.',
        base:2, vip:4
      },
      {
        id:'g02',
        name:'–í—ã–∏–≥—Ä–∞—Ç—å –≤ —Ä—É–ª–µ—Ç–∫—É –Ω–∞ 0 –∏–ª–∏ 00',
        hint:'–ó–∞–π–¥–∏—Ç–µ –≤ <b>–∫–∞–∑–∏–Ω–æ Diamond</b> ‚Üí —Ä—É–ª–µ—Ç–∫–∞. –ü–æ—Å—Ç–∞–≤—å—Ç–µ —Å—Ç–∞–≤–∫—É –∏–º–µ–Ω–Ω–æ –Ω–∞ <b>0 –∏–ª–∏ 00</b> –∏ –≤—ã–∏–≥—Ä–∞–π—Ç–µ. BP –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–∞ –≤—ã–∏–≥—Ä—ã—à ‚Äî –ø—Ä–æ—Å—Ç–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.',
        base:2, vip:4
      },
      {
        id:'g03',
        name:'25 –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ —Å—Ç—Ä–æ–π–∫–µ',
        hint:'–£—Å—Ç—Ä–æ–π—Ç–µ—Å—å –Ω–∞ —Ä–∞–±–æ—Ç—É <b>—Å—Ç—Ä–æ–∏—Ç–µ–ª–µ–º</b>. –í—ã–ø–æ–ª–Ω–∏—Ç–µ 25 —Ä–∞–±–æ—á–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–π –ø–ª–æ—â–∞–¥–∫–µ. –¢–æ—á–∫–∞ –Ω–∞–π–º–∞ –æ—Ç–º–µ—á–µ–Ω–∞ –Ω–∞ –∫–∞—Ä—Ç–µ.',
        base:2, vip:4
      },
      {
        id:'g04',
        name:'25 –¥–µ–π—Å—Ç–≤–∏–π –≤ –ø–æ—Ä—Ç—É',
        hint:'–£—Å—Ç—Ä–æ–π—Ç–µ—Å—å –Ω–∞ —Ä–∞–±–æ—Ç—É <b>–¥–æ–∫–µ—Ä–æ–º –≤ –ø–æ—Ä—Ç—É</b>. –í—ã–ø–æ–ª–Ω–∏—Ç–µ 25 –¥–µ–π—Å—Ç–≤–∏–π –ø–æ —Ä–∞–∑–≥—Ä—É–∑–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤. –¢–æ—á–∫–∞ –Ω–∞–π–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–æ—Ä—Ç—É –õ–æ—Å-–°–∞–Ω—Ç–æ—Å–∞.',
        base:2, vip:4
      },
      {
        id:'g05',
        name:'25 –¥–µ–π—Å—Ç–≤–∏–π –≤ —à–∞—Ö—Ç–µ',
        hint:'–£—Å—Ç—Ä–æ–π—Ç–µ—Å—å –Ω–∞ —Ä–∞–±–æ—Ç—É <b>—à–∞—Ö—Ç—ë—Ä–æ–º</b> –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ 25 —Ä–∞–±–æ—á–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–¥ –∑–µ–º–ª—ë–π. –¢–æ—á–∫–∞ –Ω–∞–π–º–∞ ‚Äî —à–∞—Ö—Ç–∞ –≤ –ë–ª—ç–π–Ω-–ö–∞—É–Ω—Ç–∏.',
        base:2, vip:4
      },
      {
        id:'g06',
        name:'3 –ø–æ–±–µ–¥—ã –≤ Dance Battle',
        hint:'–ü–æ—Å–µ—Ç–∏—Ç–µ –ª—é–±–æ–π <b>–Ω–æ—á–Ω–æ–π –∫–ª—É–±</b> –∏ –≤—ã–∏–≥—Ä–∞–π—Ç–µ 3 Dance Battle. –ü–æ–±–µ–¥—ã –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ–¥—Ä—è–¥. –î–ª—è —É—á–∞—Å—Ç–∏—è –Ω—É–∂–µ–Ω —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Å–æ–ø–µ—Ä–Ω–∏–∫.',
        base:2, vip:4
      },
      {
        id:'g07',
        name:'–ó–∞–∫–∞–∑–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –±–∏–∑–Ω–µ—Å–∞',
        hint:'–û—Ç–∫—Ä–æ–π—Ç–µ –º–µ–Ω—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è <b>–≤–∞—à–∏–º –±–∏–∑–Ω–µ—Å–æ–º</b> –∏ –≤—Ä—É—á–Ω—É—é –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ –∑–∞–∫–∞–∑ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤: –Ω–∞–∂–º–∏—Ç–µ <b>–≤—ã–∫–ª</b>, –∑–∞—Ç–µ–º <b>–≤–∫–ª</b>. –û–¥–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ = –≤—ã–ø–æ–ª–Ω–µ–Ω–æ.',
        base:1, vip:2
      },
      {
        id:'g08',
        name:'20 –ø–æ–¥—Ö–æ–¥–æ–≤ –≤ —Å–ø–æ—Ä—Ç–∑–∞–ª–µ',
        hint:'–ó–∞–π–¥–∏—Ç–µ –≤ <b>—Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –∑–∞–ª</b> –∏–ª–∏ –Ω–∞ —É–ª–∏—á–Ω—É—é —Å–ø–æ—Ä—Ç–ø–ª–æ—â–∞–¥–∫—É –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ 20 –ø–æ–¥—Ö–æ–¥–æ–≤ –Ω–∞ –ª—é–±–æ–º —Ç—Ä–µ–Ω–∞–∂—ë—Ä–µ. –¢–∞–∫–∂–µ –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ <b>—ç—Å–ø–∞–Ω–¥–µ—Ä–∞</b>.',
        base:1, vip:2
      },
      {
        id:'g09',
        name:'–£—Å–ø–µ—à–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤ —Ç–∏—Ä–µ',
        hint:'–ü–æ—Å–µ—Ç–∏—Ç–µ <b>—Ç–∏—Ä</b> –∏ –∑–∞–≤–µ—Ä—à–∏—Ç–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É —Å –Ω—É–∂–Ω—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º. –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è <b>—É—Å–ø–µ—à–Ω–æ</b> ‚Äî –Ω–∞–±—Ä–∞—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ—á–∫–æ–≤ –∑–∞ –ø–æ–ø—ã—Ç–∫—É.',
        base:1, vip:2
      },
      {
        id:'g10',
        name:'–î–æ—Å—Ç–∞–≤–∏—Ç—å 10 –ø–æ—Å—ã–ª–æ–∫ –Ω–∞ –ø–æ—á—Ç–µ',
        hint:'–£—Å—Ç—Ä–æ–π—Ç–µ—Å—å –Ω–∞ —Ä–∞–±–æ—Ç—É <b>–ø–æ—á—Ç–∞–ª—å–æ–Ω–æ–º</b> –∏ –¥–æ—Å—Ç–∞–≤—å—Ç–µ 10 –ø–æ—Å—ã–ª–æ–∫ –ø–æ –∞–¥—Ä–µ—Å–∞–º. –ú–∞—Ä—à—Ä—É—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ –ø–æ –≥–æ—Ä–æ–¥—É.',
        base:1, vip:2
      },
      {
        id:'g11',
        name:'–ê—Ä–µ–Ω–¥–æ–≤–∞—Ç—å –∫–∏–Ω–æ—Å—Ç—É–¥–∏—é',
        hint:'–ù–∞–π–¥–∏—Ç–µ <b>–∫–∏–Ω–æ—Å—Ç—É–¥–∏—é</b> –Ω–∞ –∫–∞—Ä—Ç–µ –∏ –æ–ø–ª–∞—Ç–∏—Ç–µ –∞—Ä–µ–Ω–¥—É. –° VIP-—Å—Ç–∞—Ç—É—Å–æ–º –¥–µ–π—Å—Ç–≤—É–µ—Ç —Å–∫–∏–¥–∫–∞. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑ –∞—Ä–µ–Ω–¥–æ–≤–∞—Ç—å.',
        base:2, vip:4
      },
      {
        id:'g12',
        name:'–ö—É–ø–∏—Ç—å –ª–æ—Ç–µ—Ä–µ–π–Ω—ã–π –±–∏–ª–µ—Ç',
        hint:'–û—Ç–∫—Ä–æ–π—Ç–µ <b>—Ç–µ–ª–µ—Ñ–æ–Ω ‚Üí –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –õ–æ—Ç–µ—Ä–µ—è</b> –∏ –∫—É–ø–∏—Ç–µ –æ–¥–∏–Ω –±–∏–ª–µ—Ç. –í—ã–∏–≥—Ä—ã—à –Ω–µ –≤–∞–∂–µ–Ω ‚Äî BP –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è –∑–∞ —Å–∞–º —Ñ–∞–∫—Ç –ø–æ–∫—É–ø–∫–∏.',
        base:1, vip:2
      },
      {
        id:'g13',
        name:'–í—ã–∏–≥—Ä–∞—Ç—å –≥–æ–Ω–∫—É –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–≥–µ',
        hint:'–ù–∞–π–¥–∏—Ç–µ <b>–∫–∞—Ä—Ç–æ–¥—Ä–æ–º</b> –Ω–∞ –∫–∞—Ä—Ç–µ –∏ –∑–∞–π–º–∏—Ç–µ <b>1 –º–µ—Å—Ç–æ</b> –≤ –≥–æ–Ω–∫–µ. –î–ª—è —É—á–∞—Å—Ç–∏—è –Ω—É–∂–µ–Ω —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Å–æ–ø–µ—Ä–Ω–∏–∫.',
        base:1, vip:2
      },
      {
        id:'g14',
        name:'10 –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ —Ñ–µ—Ä–º–µ',
        hint:'–£—Å—Ç—Ä–æ–π—Ç–µ—Å—å –Ω–∞ —Ä–∞–±–æ—Ç—É –Ω–∞ <b>—Ñ–µ—Ä–º–µ</b> –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ 10 –¥–µ–π—Å—Ç–≤–∏–π. –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω –≤–∏–¥ —Ä–∞–±–æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ: –ø–æ–¥–æ–∏—Ç—å –∫–æ—Ä–æ–≤—É, —Å–æ–±—Ä–∞—Ç—å —è–π—Ü–∞, –ø–æ–ª–∏—Ç—å –ø–æ–ª–µ ‚Äî –≤—Å—ë –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è.',
        base:1, vip:2
      },
      {
        id:'g15',
        name:'–ü–æ—Ç—É—à–∏—Ç—å 25 "–æ–≥–æ–Ω—å–∫–æ–≤" –ø–æ–∂–∞—Ä–Ω—ã–º',
        hint:'–£—Å—Ç—Ä–æ–π—Ç–µ—Å—å –Ω–∞ —Ä–∞–±–æ—Ç—É <b>–ø–æ–∂–∞—Ä–Ω—ã–º</b> –∏ –ø–æ—Ç—É—à–∏—Ç–µ 25 –≤–æ–∑–≥–æ—Ä–∞–Ω–∏–π. –ö–∞–∂–¥—ã–π –ø–æ—Ç—É—à–µ–Ω–Ω—ã–π –æ—á–∞–≥ –æ–≥–Ω—è = 1 –¥–µ–π—Å—Ç–≤–∏–µ. –í—ã–µ–∑–∂–∞–π—Ç–µ –Ω–∞ –≤—ã–∑–æ–≤—ã.',
        base:1, vip:2
      },
      {
        id:'g16',
        name:'–í—ã–∫–æ–ø–∞—Ç—å 1 —Å–æ–∫—Ä–æ–≤–∏—â–µ',
        hint:'–í–æ–∑—å–º–∏—Ç–µ <b>–ª–æ–ø–∞—Ç—É</b> –∏ –∏—Å—Å–ª–µ–¥—É–π—Ç–µ –∫–∞—Ä—Ç—É. –ù—É–∂–Ω–æ –≤—ã–∫–æ–ø–∞—Ç—å –∏–º–µ–Ω–Ω–æ <b>—Å–æ–∫—Ä–æ–≤–∏—â–µ</b> ‚Äî –æ–±—ã—á–Ω—ã–π –º—É—Å–æ—Ä (–±—É—Ç—ã–ª–∫–∏, –∫–æ–Ω—Å–µ—Ä–≤—ã –∏ —Ç.–¥.) –Ω–µ –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è.',
        base:1, vip:2
      },
      {
        id:'g17',
        name:'–ü—Ä–æ–µ—Ö–∞—Ç—å 1 —É–ª–∏—á–Ω—É—é –≥–æ–Ω–∫—É',
        hint:'–°–æ–∑–¥–∞–π—Ç–µ –≥–æ–Ω–∫—É —á–µ—Ä–µ–∑ <b>—Ç–µ–ª–µ—Ñ–æ–Ω ‚Üí –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ì–æ–Ω–∫–∏</b> —Å–æ —Å—Ç–∞–≤–∫–æ–π <b>–æ—Ç 1000$</b>. –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω. –î–æ—Å—Ç—É–ø–Ω–æ —Å 5-–≥–æ —É—Ä–æ–≤–Ω—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞.',
        base:1, vip:2
      },
      {
        id:'g18',
        name:'15 —Ä–µ–π—Å–æ–≤ –¥–∞–ª—å–Ω–æ–±–æ–π—â–∏–∫–æ–º',
        hint:'–£—Å—Ç—Ä–æ–π—Ç–µ—Å—å –Ω–∞ —Ä–∞–±–æ—Ç—É <b>–¥–∞–ª—å–Ω–æ–±–æ–π—â–∏–∫–æ–º</b> –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ 15 —Ä–µ–π—Å–æ–≤ ‚Äî –¥–æ—Å—Ç–∞–≤—å—Ç–µ –≥—Ä—É–∑ –≤ –ø–æ—Ä—Ç –∏–∑ –ª—é–±–æ–π —Ç–æ—á–∫–∏. <b>–ö–ª—É–±–Ω—ã–µ –∑–∞–∫–∞–∑—ã –Ω–µ –∑–∞—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è</b>, —Ç–æ–ª—å–∫–æ –æ–±—ã—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞.',
        base:2, vip:4
      },
      {
        id:'g19',
        name:'2√ó —Å–º–µ–Ω–∞ –≤–Ω–µ—à–Ω–æ—Å—Ç–∏ —É —Ö–∏—Ä—É—Ä–≥–∞ EMS',
        hint:'–ù–∞–π–¥–∏—Ç–µ <b>NPC –•–∏—Ä—É—Ä–≥–∞ –≤ –≥–æ—Ä–æ–¥—Å–∫–æ–π –±–æ–ª—å–Ω–∏—Ü–µ EMS</b> –∏ –æ–ø–ª–∞—Ç–∏—Ç–µ —Å–º–µ–Ω—É –≤–Ω–µ—à–Ω–æ—Å—Ç–∏ <b>–¥–≤–∞ —Ä–∞–∑–∞</b>. –ö–∞–∂–¥–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –ø–ª–∞—Ç–Ω–∞—è. –¢–æ–ª—å–∫–æ NPC-—Ö–∏—Ä—É—Ä–≥ –≤ EMS ‚Äî –¥—Ä—É–≥–∏–µ –º–µ—Å—Ç–∞ –Ω–µ –∑–∞—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è.',
        base:2, vip:4
      },
      {
        id:'g20',
        name:'–î–æ–±–∞–≤–∏—Ç—å 5 –≤–∏–¥–µ–æ –≤ –∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä',
        hint:'–ó–∞–π–¥–∏—Ç–µ –≤ <b>–∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä</b> –∏ –¥–æ–±–∞–≤—å—Ç–µ 5 –≤–∏–¥–µ–æ—Ä–æ–ª–∏–∫–æ–≤ –≤ –ø–ª–µ–π–ª–∏—Å—Ç. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ä–æ–ª–∏–∫ 5 —Ä–∞–∑ –ø–æ–¥—Ä—è–¥ ‚Äî –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è.',
        base:1, vip:2
      },
      {
        id:'g21',
        name:'5 –ø–æ–±–µ–¥ –≤ –¢—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–æ–º –∫–æ–º–ø–ª–µ–∫—Å–µ',
        hint:'–ü–æ—Å–µ—Ç–∏—Ç–µ <b>–¢—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Å (–¢–ö)</b> –∏ –≤—ã–∏–≥—Ä–∞–π—Ç–µ 5 –∏–≥—Ä —Å–æ —Å—Ç–∞–≤–∫–æ–π <b>–æ—Ç 100$</b>. –ò–≥—Ä—ã –±–µ–∑ —Å—Ç–∞–≤–∫–∏ –Ω–µ –∑–∞—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è.',
        base:1, vip:2
      },
      {
        id:'g22',
        name:'3 –ø–æ–±–µ–¥—ã –Ω–∞ –∞—Ä–µ–Ω–µ Maze Bank',
        hint:'–ü–æ—Å–µ—Ç–∏—Ç–µ <b>–∞—Ä–µ–Ω—É Maze Bank</b> –∏ –≤—ã–∏–≥—Ä–∞–π—Ç–µ 3 –ª—é–±—ã–µ –∏–≥—Ä—ã —Å–æ —Å—Ç–∞–≤–∫–æ–π <b>–æ—Ç 100$</b>. –í–∏–¥ –∏–≥—Ä—ã –Ω–µ –≤–∞–∂–µ–Ω.',
        base:1, vip:2
      },
      {
        id:'g23',
        name:'2 —Ä–µ–π—Å–∞ –∞–≤—Ç–æ–±—É—Å–Ω–∏–∫–æ–º',
        hint:'–£—Å—Ç—Ä–æ–π—Ç–µ—Å—å –Ω–∞ —Ä–∞–±–æ—Ç—É <b>–≤–æ–¥–∏—Ç–µ–ª–µ–º –∞–≤—Ç–æ–±—É—Å–∞</b> –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–∏—Ç–µ 2 —Ä–µ–π—Å–∞ –Ω–∞ –ª—é–±–æ–º –º–∞—Ä—à—Ä—É—Ç–µ. –î–æ–µ–∑–∂–∞–π—Ç–µ –¥–æ –∫–æ–Ω–µ—á–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏.',
        base:2, vip:4
      },
      {
        id:'g24',
        name:'–°–Ω—è—Ç—å 5 —à–∫—É—Ä –ø—Ä–æ—á–Ω–æ—Å—Ç—å—é 100%',
        hint:'–£–±–µ–π—Ç–µ –∂–∏–≤–æ—Ç–Ω–æ–µ <b>—Å –æ–¥–Ω–æ–≥–æ –≤—ã—Å—Ç—Ä–µ–ª–∞</b> ‚Äî —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞ —à–∫—É—Ä–∞ –±—É–¥–µ—Ç 100%. –ù—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫ 5 —Ä–∞–∑. –ü–æ–¥—Ö–æ–¥—è—Ç –æ–ª–µ–Ω–∏, –∫–∞–±–∞–Ω—ã –∏ –¥—Ä—É–≥–∏–µ –∂–∏–≤–æ—Ç–Ω—ã–µ. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ—Ö–æ—Ç–Ω–∏—á—å—è –≤–∏–Ω—Ç–æ–≤–∫–∞.',
        base:2, vip:4
      },
      {
        id:'g25',
        name:'–ü–æ—Å–µ—Ç–∏—Ç—å –ª—é–±–æ–π —Å–∞–π—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ',
        hint:'–û—Ç–∫—Ä–æ–π—Ç–µ <b>—Ç–µ–ª–µ—Ñ–æ–Ω ‚Üí –±—Ä–∞—É–∑–µ—Ä</b> –∏ –∑–∞–π–¥–∏—Ç–µ –Ω–∞ –ª—é–±–æ–π —Å–∞–π—Ç. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É ‚Äî –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–π –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å–∞–π—Ç –∏–≥—Ä—ã.',
        base:1, vip:2
      },
      {
        id:'g26',
        name:'–ó–∞–π—Ç–∏ –≤ –∫–∞–Ω–∞–ª –≤ Brawl',
        hint:'–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ <b>Brawl</b> –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –∏ –∑–∞–π–¥–∏—Ç–µ –≤ –ª—é–±–æ–π –∫–∞–Ω–∞–ª. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å ‚Äî –æ—Ç–≤–µ—á–∞—Ç—å –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.',
        base:1, vip:2
      },
      {
        id:'g27',
        name:'–ü–æ—Å—Ç–∞–≤–∏—Ç—å –ª–∞–π–∫ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ Match',
        hint:'–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ <b>Match</b> –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –∏ –ø–æ—Å—Ç–∞–≤—å—Ç–µ –ª–∞–π–∫ –ª—é–±–æ–π –∞–Ω–∫–µ—Ç–µ. –û–¥–Ω–æ–≥–æ –ª–∞–π–∫–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.',
        base:1, vip:2
      },
      {
        id:'g28',
        name:'–ü—Ä–æ–∫—Ä—É—Ç–∏—Ç—å –∫–µ–π—Å –∑–∞ DP',
        hint:'–í <b>F10 ‚Üí –î–æ–Ω–∞—Ç-—Ä—É–ª–µ—Ç–∫–∞</b> –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ —Å–µ—Ä–µ–±—Ä—è–Ω—ã–π, –∑–æ–ª–æ—Ç–æ–π –∏–ª–∏ driver-–∫–µ–π—Å –∑–∞ <b>DP (–¥–æ–Ω–∞—Ç-–ø–æ–∏–Ω—Ç—ã)</b>. –û–±—ã—á–Ω—ã–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∫–µ–π—Å—ã –Ω–µ –∑–∞—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è. –°–∞–º—ã–π —Ü–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± —Ñ–∞—Ä–º–∞ BP.',
        base:10, vip:20
      },
      {
        id:'g29',
        name:'–ö–∏–Ω—É—Ç—å –º—è—á –ø–∏—Ç–æ–º—Ü—É 15 —Ä–∞–∑',
        hint:'–í–æ–∑—å–º–∏—Ç–µ <b>–ø–∏—Ç–æ–º—Ü–∞ (—Å–æ–±–∞–∫—É)</b> –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É –∞–ø–æ—Ä—Ç / –±—Ä–æ—Å—å—Ç–µ –º—è—á 15 —Ä–∞–∑. –ü–∏—Ç–æ–º—Ü–∞ –º–æ–∂–Ω–æ –≤–∑—è—Ç—å –≤ –∑–æ–æ–º–∞–≥–∞–∑–∏–Ω–µ.',
        base:2, vip:4
      },
      {
        id:'g30',
        name:'15 –∫–æ–º–∞–Ω–¥ –¥–ª—è –ø–∏—Ç–æ–º—Ü–∞',
        hint:'–î–∞–π—Ç–µ –ø–∏—Ç–æ–º—Ü—É 15 –ª—é–±—ã—Ö <b>–∫–æ–º–∞–Ω–¥</b> —á–µ—Ä–µ–∑ –º–µ–Ω—é –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è: —Å–∏–¥–µ—Ç—å, –ª–µ–∂–∞—Ç—å, –≥–æ–ª–æ—Å –∏ —Ç.–¥. –ö–æ–º–∞–Ω–¥—ã –º–æ–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å.',
        base:2, vip:4
      },
      {
        id:'g31',
        name:'–°—Ç–∞–≤–∫–∞ –≤ –∫–æ–ª–µ—Å–µ —É–¥–∞—á–∏ –∫–∞–∑–∏–Ω–æ',
        hint:'–í <b>–∫–∞–∑–∏–Ω–æ Diamond</b> –Ω–∞–π–¥–∏—Ç–µ –º–µ–∂—Å–µ—Ä–≤–µ—Ä–Ω–æ–µ –∫–æ–ª–µ—Å–æ —É–¥–∞—á–∏ –∏ —Å–¥–µ–ª–∞–π—Ç–µ —Å—Ç–∞–≤–∫—É. BP –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è –∑–∞ —Å–∞–º —Ñ–∞–∫—Ç —Å—Ç–∞–≤–∫–∏ ‚Äî –≤—ã–∏–≥—Ä—ã—à –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω.',
        base:3, vip:6
      },
      {
        id:'g32',
        name:'–ü—Ä–æ–µ—Ö–∞—Ç—å 1 —Å—Ç–∞–Ω—Ü–∏—é –Ω–∞ –º–µ—Ç—Ä–æ',
        hint:'–ù–∞–π–¥–∏—Ç–µ –≤—Ö–æ–¥ –Ω–∞ —Å—Ç–∞–Ω—Ü–∏—é <b>–º–µ—Ç—Ä–æ</b>, –∫—É–ø–∏—Ç–µ –±–∏–ª–µ—Ç –∏ –ø—Ä–æ–µ–¥—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –æ—Å—Ç–∞–Ω–æ–≤–∫—É. –°—Ç–∞–Ω—Ü–∏–∏ –º–µ—Ç—Ä–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –≤ —Ä–∞–∑–Ω—ã—Ö —Ä–∞–π–æ–Ω–∞—Ö –õ–æ—Å-–°–∞–Ω—Ç–æ—Å–∞.',
        base:2, vip:4
      },
      {
        id:'g33',
        name:'–ü–æ–π–º–∞—Ç—å 20 —Ä—ã–±',
        hint:'–í–æ–∑—å–º–∏—Ç–µ <b>—É–¥–æ—á–∫—É</b> –∏ –ø–æ—Ä—ã–±–∞—á—å—Ç–µ –≤ –ª—é–±–æ–º –≤–æ–¥–æ—ë–º–µ: —Ä–µ–∫–∏, –º–æ—Ä–µ, –≤–æ–¥–æ—Ö—Ä–∞–Ω–∏–ª–∏—â–∞. –í–∏–¥ —Ä—ã–±—ã –Ω–µ –≤–∞–∂–µ–Ω ‚Äî –Ω—É–∂–Ω–æ –ø–æ–π–º–∞—Ç—å 20 —à—Ç—É–∫.',
        base:4, vip:8
      },
      {
        id:'g34',
        name:'2 –∫–≤–µ—Å—Ç–∞ –≤ –∫–ª—É–±–∞—Ö',
        hint:'–í—Å—Ç—É–ø–∏—Ç–µ –≤ –ª—é–±–æ–π <b>–∫–ª—É–±</b> (–∞–≤—Ç–æ–∫–ª—É–±, –º–æ—Ç–æ–∫–ª—É–± –∏ —Ç.–¥.) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ 2 –∫–≤–µ—Å—Ç–∞. –¢–∏–ø –∫–ª—É–±–∞ –Ω–µ –≤–∞–∂–µ–Ω.',
        base:4, vip:8
      },
      {
        id:'g35',
        name:'–ü–æ—á–∏–Ω–∏—Ç—å –¥–µ—Ç–∞–ª—å –≤ –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å–µ',
        hint:'–£—Å—Ç—Ä–æ–π—Ç–µ—Å—å –Ω–∞ —Ä–∞–±–æ—Ç—É –≤ <b>–∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å</b> –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Ä–µ–º–æ–Ω—Ç –¥–µ—Ç–∞–ª–∏ –Ω–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ –∫–ª–∏–µ–Ω—Ç–∞. –û–¥–Ω–∞ –ø–æ—á–∏–Ω–∫–∞ = –≤—ã–ø–æ–ª–Ω–µ–Ω–æ.',
        base:1, vip:2
      },
      {
        id:'g36',
        name:'–ó–∞–±—Ä–æ—Å–∏—Ç—å 2 –º—è—á–∞ –≤ –±–∞—Å–∫–µ—Ç–±–æ–ª',
        hint:'–ù–∞–π–¥–∏—Ç–µ <b>–±–∞—Å–∫–µ—Ç–±–æ–ª—å–Ω—É—é –ø–ª–æ—â–∞–¥–∫—É</b> –∏ –∑–∞–±—Ä–æ—Å—å—Ç–µ 2 –º—è—á–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É. –ü–ª–æ—â–∞–¥–∫–∏ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –≤ –∂–∏–ª—ã—Ö –∫–≤–∞—Ä—Ç–∞–ª–∞—Ö –≥–æ—Ä–æ–¥–∞.',
        base:1, vip:2
      },
      {
        id:'g37',
        name:'–ó–∞–±–∏—Ç—å 2 –≥–æ–ª–∞ –≤ —Ñ—É—Ç–±–æ–ª',
        hint:'–ù–∞–π–¥–∏—Ç–µ <b>—Ñ—É—Ç–±–æ–ª—å–Ω–æ–µ –ø–æ–ª–µ</b> –∏ –∑–∞–±–µ–π—Ç–µ 2 –≥–æ–ª–∞. –ù—É–∂–µ–Ω —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –¥—Ä—É–≥–æ–π —É—á–∞—Å—Ç–Ω–∏–∫.',
        base:1, vip:2
      },
      {
        id:'g38',
        name:'–ü–æ–±–µ–¥–∏—Ç—å –≤ –∞—Ä–º—Ä–µ—Å—Ç–ª–∏–Ω–≥–µ',
        hint:'–ù–∞–π–¥–∏—Ç–µ —Ç–æ—á–∫—É –¥–ª—è <b>–∞—Ä–º—Ä–µ—Å—Ç–ª–∏–Ω–≥–∞</b> (–±–∞—Ä—ã, –∫–ª—É–±—ã) –∏ –ø–æ–±–µ–¥–∏—Ç–µ —Å–æ–ø–µ—Ä–Ω–∏–∫–∞. –ù—É–∂–µ–Ω –≤—Ç–æ—Ä–æ–π –∏–≥—Ä–æ–∫.',
        base:1, vip:2
      },
      {
        id:'g39',
        name:'–ü–æ–±–µ–¥–∏—Ç—å –≤ –¥–∞—Ä—Ç—Å',
        hint:'–ù–∞–π–¥–∏—Ç–µ <b>–¥–∞—Ä—Ç—Å-–¥–æ—Å–∫—É</b> –≤ –±–∞—Ä–µ –∏–ª–∏ –∫–ª—É–±–µ –∏ –≤—ã–∏–≥—Ä–∞–π—Ç–µ –ø–∞—Ä—Ç–∏—é.',
        base:1, vip:2
      },
      {
        id:'g40',
        name:'1 –º–∏–Ω—É—Ç–∞ –≤ –≤–æ–ª–µ–π–±–æ–ª',
        hint:'–ù–∞–π–¥–∏—Ç–µ <b>–≤–æ–ª–µ–π–±–æ–ª—å–Ω—É—é –ø–ª–æ—â–∞–¥–∫—É</b> (–ø–ª—è–∂–∏, —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ –∑–æ–Ω—ã) –∏ —Å—ã–≥—Ä–∞–π—Ç–µ –º–∏–Ω–∏–º—É–º <b>1 –º–∏–Ω—É—Ç—É</b>.',
        base:1, vip:2
      },
      {
        id:'g41',
        name:'1 –º–∏–Ω—É—Ç–∞ –≤ –Ω–∞—Å—Ç–æ–ª—å–Ω—ã–π —Ç–µ–Ω–Ω–∏—Å',
        hint:'–ù–∞–π–¥–∏—Ç–µ —Å—Ç–æ–ª –¥–ª—è <b>–Ω–∞—Å—Ç–æ–ª—å–Ω–æ–≥–æ —Ç–µ–Ω–Ω–∏—Å–∞</b> –≤ —Å–ø–æ—Ä—Ç–∑–∞–ª–µ –∏–ª–∏ –∫–ª—É–±–µ –∏ —Å—ã–≥—Ä–∞–π—Ç–µ –º–∏–Ω–∏–º—É–º <b>1 –º–∏–Ω—É—Ç—É</b>.',
        base:1, vip:2
      },
      {
        id:'g42',
        name:'1 –º–∏–Ω—É—Ç–∞ –≤ –±–æ–ª—å—à–æ–π —Ç–µ–Ω–Ω–∏—Å',
        hint:'–ù–∞–π–¥–∏—Ç–µ <b>—Ç–µ–Ω–Ω–∏—Å–Ω—ã–π –∫–æ—Ä—Ç</b> –≤ –±–æ–≥–∞—Ç–æ–º —Ä–∞–π–æ–Ω–µ –≥–æ—Ä–æ–¥–∞ –∏ —Å—ã–≥—Ä–∞–π—Ç–µ –º–∏–Ω–∏–º—É–º <b>1 –º–∏–Ω—É—Ç—É</b>.',
        base:1, vip:2
      },
      {
        id:'g43',
        name:'–°—ã–≥—Ä–∞—Ç—å –≤ –º–∞—Ñ–∏—é –≤ –∫–∞–∑–∏–Ω–æ',
        hint:'–í <b>–∫–∞–∑–∏–Ω–æ Diamond</b> –Ω–∞–π–¥–∏—Ç–µ —Å—Ç–æ–ª —Å –∏–≥—Ä–æ–π "–ú–∞—Ñ–∏—è" –∏ –ø—Ä–æ–≤–µ–¥–∏—Ç–µ –æ–¥–Ω—É –ø–æ–ª–Ω—É—é –ø–∞—Ä—Ç–∏—é. –í—ã–∏–≥—Ä—ã—à –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω.',
        base:3, vip:6
      },
      {
        id:'g44',
        name:'–í–Ω–µ—Å—Ç–∏ –ø–ª–∞—Ç—ë–∂ –ø–æ –ª–∏–∑–∏–Ω–≥—É',
        hint:'–û—Ç–∫—Ä–æ–π—Ç–µ –º–µ–Ω—é <b>–ª–∏–∑–∏–Ω–≥–∞</b> –∏ –≤–Ω–µ—Å–∏—Ç–µ –æ—á–µ—Ä–µ–¥–Ω–æ–π –ø–ª–∞—Ç—ë–∂ –∑–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –≤ —Ä–∞—Å—Å—Ä–æ—á–∫—É. –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω –≤ –ª–∏–∑–∏–Ω–≥ –∑–∞—Ä–∞–Ω–µ–µ.',
        base:1, vip:2
      },
      {
        id:'g45',
        name:'–ü–æ—Å–∞–¥–∏—Ç—å —Ç—Ä–∞–≤—É –≤ —Ç–µ–ø–ª–∏—Ü–µ',
        hint:'–ù–∞–π–¥–∏—Ç–µ <b>—Ç–µ–ø–ª–∏—Ü—É</b> –∏ –ø–æ—Å–∞–¥–∏—Ç–µ —Ä–∞—Å—Ç–µ–Ω–∏—è. –î–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ –∫—Ä–∏–º–∏–Ω–∞–ª—å–Ω—É—é —Ñ—Ä–∞–∫—Ü–∏—é –∏–ª–∏ –ª–∏—á–Ω–æ–µ –≤–ª–∞–¥–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–º.',
        base:4, vip:8
      },
      {
        id:'g46',
        name:'–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫—É –≤ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏',
        hint:'–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ü–∏–∫–ª –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏ <b>–æ–±–µ–∑–±–æ–ª–∏–≤–∞—é—â–∏—Ö</b> –≤ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏. –î–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ –º–∞—Ñ–∏—é –∏–ª–∏ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–±—ä–µ–∫—Ç—É.',
        base:4, vip:8
      },
      {
        id:'g47',
        name:'–£—á–∞—Å—Ç–∏–µ –≤ 2 –∞–∏—Ä–¥—Ä–æ–ø–∞—Ö',
        hint:'–ü—Ä–∏–º–∏—Ç–µ —É—á–∞—Å—Ç–∏–µ –≤ <b>2 –∞–∏—Ä–¥—Ä–æ–ø–∞—Ö</b> ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö, –ø—Ä–∏ –∫–æ—Ç–æ—Ä—ã—Ö —Å –Ω–µ–±–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≥—Ä—É–∑. –°–ª–µ–¥–∏—Ç–µ –∑–∞ —Å–µ—Ä–≤–µ—Ä–Ω—ã–º–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏. –ù—É–∂–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –∑–æ–Ω–µ –∞–∏—Ä–¥—Ä–æ–ø–∞.',
        base:4, vip:8
      },
      {
        id:'g48',
        name:'–ü–æ—á–∏–Ω–∏—Ç—å —á—É–∂–æ–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å –≤ –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å–µ',
        hint:'–í <b>–∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å–µ</b> –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Ä–µ–º–æ–Ω—Ç –∞–≤—Ç–æ–º–æ–±–∏–ª—è <b>–¥—Ä—É–≥–æ–≥–æ –∏–≥—Ä–æ–∫–∞</b>, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –ø—Ä–æ—á–Ω–æ—Å—Ç—å –¥–µ—Ç–∞–ª–∏ <b>–Ω–∏–∂–µ 90%</b>. –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å –Ω–µ –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è.',
        base:2, vip:4
      },
    ]
  },
  {
    id:'fac', name:'–§—Ä–∞–∫—Ü–∏–æ–Ω–Ω—ã–µ', icon:'üõ°',
    acts:[
      {
        id:'f01',
        name:'–ó–∞–∫—Ä–∞—Å–∏—Ç—å 7 –≥—Ä–∞—Ñ—Ñ–∏—Ç–∏ (–±–∞–Ω–¥–∞)',
        hint:'–°–æ—Å—Ç–æ—è –≤ <b>–±–∞–Ω–¥–µ</b>, –∑–∞–∫—Ä–∞—Å—å—Ç–µ 7 –≥—Ä–∞—Ñ—Ñ–∏—Ç–∏ –Ω–∞ —Å—Ç–µ–Ω–∞—Ö. –ú–æ–∂–Ω–æ –∑–∞–∫—Ä–∞—à–∏–≤–∞—Ç—å –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ –≥—Ä–∞—Ñ—Ñ–∏—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ ‚Äî –∫–∞–∂–¥–æ–µ –∑–∞–∫—Ä–∞—à–∏–≤–∞–Ω–∏–µ –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ.',
        base:1, vip:2
      },
      {
        id:'f02',
        name:'–°–¥–∞—Ç—å 5 –ø–∞—Ä—Ç–∏–π –∫–æ–Ω—Ç—Ä–∞–±–∞–Ω–¥—ã (–º–∞—Ñ–∏—è)',
        hint:'–°–æ—Å—Ç–æ—è –≤ <b>–º–∞—Ñ–∏–∏</b>, –ø–æ–ª—É—á–∏—Ç–µ –æ–ø–ª–∞—Ç—É –∑–∞ –¥–æ—Å—Ç–∞–≤–∫—É –∫–æ–Ω—Ç—Ä–∞–±–∞–Ω–¥—ã 5 —Ä–∞–∑. –ù—É–∂–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å 5 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –¥–æ—Å—Ç–∞–≤–æ–∫ —Å –ø–æ–ª—É—á–µ–Ω–∏–µ–º –¥–µ–Ω–µ–≥.',
        base:2, vip:4
      },
      {
        id:'f03',
        name:'–£—á–∞—Å—Ç–∏–µ –≤ –∫–∞–ø—Ç–µ –∏–ª–∏ –±–∏–∑–≤–∞—Ä–µ',
        hint:'<b>–ö–∞–ø—Ç</b> ‚Äî –≤–æ–π–Ω–∞ –±–∞–Ω–¥—ã –∑–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—é. <b>–ë–∏–∑–≤–∞—Ä</b> ‚Äî –≤–æ–π–Ω–∞ –º–∞—Ñ–∏–∏ –∑–∞ –±–∏–∑–Ω–µ—Å. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∏–Ω—è—Ç—å —É—á–∞—Å—Ç–∏–µ —Ö–æ—Ç—è –±—ã –≤ –æ–¥–Ω–æ–º —Å–æ–±—ã—Ç–∏–∏.',
        base:1, vip:2
      },
      {
        id:'f04',
        name:'–ü—Ä–∏–≤–µ–∑—Ç–∏ –•–∞–º–º–µ—Ä —Å –í–ó–• –Ω–∞ —Ç–∏—Ç—É–ª',
        hint:'–°–æ—Å—Ç–æ—è –≤ –±–∞–Ω–¥–µ –∏–ª–∏ –º–∞—Ñ–∏–∏, —É–≥–æ–Ω–∏—Ç–µ <b>–•–∞–º–º–µ—Ä —Å –≤–æ–µ–Ω–Ω–æ-–∑–∞—Ö–≤–∞—á–µ–Ω–Ω–æ–π –∑–æ–Ω—ã (–í–ó–•)</b> –∏ –¥–æ—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ –Ω–∞ —Ç–æ—á–∫—É —Å–¥–∞—á–∏ (—Ç–∏—Ç—É–ª). –¢—Ä–µ–±—É–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –≥—Ä—É–ø–ø—ã.',
        base:3, vip:6
      },
      {
        id:'f05',
        name:'–í—ã–¥–∞—Ç—å 5 –º–µ–¥–∫–∞—Ä—Ç (EMS)',
        hint:'–†–∞–±–æ—Ç–∞—è –≤ <b>EMS</b>, –≤—ã–¥–∞–π—Ç–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –∫–∞—Ä—Ç—ã 5 –∏–≥—Ä–æ–∫–∞–º. –ú–µ–¥–∫–∞—Ä—Ç–∞ –≤—ã–¥–∞—ë—Ç—Å—è –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ –æ—Å–º–æ—Ç—Ä–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞.',
        base:2, vip:4
      },
      {
        id:'f06',
        name:'–ó–∞–∫—Ä—ã—Ç—å 15 –≤—ã–∑–æ–≤–æ–≤ (EMS)',
        hint:'–†–∞–±–æ—Ç–∞—è –≤ <b>EMS</b>, –æ—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ 15 –≤—ã–∑–æ–≤–æ–≤ –∏ —É—Å–ø–µ—à–Ω–æ –∑–∞–∫—Ä–æ–π—Ç–µ –∏—Ö. –í—ã–∑–æ–≤ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∑–∞–∫—Ä—ã—Ç—ã–º –ø–æ—Å–ª–µ –æ–∫–∞–∑–∞–Ω–∏—è –ø–æ–º–æ—â–∏ –ø–æ—Å—Ç—Ä–∞–¥–∞–≤—à–µ–º—É.',
        base:2, vip:4
      },
      {
        id:'f07',
        name:'–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å 40 –æ–±—ä—è–≤–ª–µ–Ω–∏–π (Weazel News)',
        hint:'–†–∞–±–æ—Ç–∞—è –≤ <b>Weazel News</b>, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∏ –æ–ø—É–±–ª–∏–∫—É–π—Ç–µ 40 –æ–±—ä—è–≤–ª–µ–Ω–∏–π –æ—Ç –∏–≥—Ä–æ–∫–æ–≤. –ö–∞–∂–¥–∞—è —É—Å–ø–µ—à–Ω–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è = 1 –¥–µ–π—Å—Ç–≤–∏–µ.',
        base:2, vip:4
      },
      {
        id:'f08',
        name:'–í–∑–ª–æ–º–∞—Ç—å 15 –∑–∞–º–∫–æ–≤ –Ω–∞ –æ–≥—Ä–∞–±–ª–µ–Ω–∏—è—Ö',
        hint:'–£—á–∞—Å—Ç–≤—É–π—Ç–µ –≤ <b>–æ–≥—Ä–∞–±–ª–µ–Ω–∏—è—Ö –¥–æ–º–æ–≤ –∏–ª–∏ —É–≥–æ–Ω–∞—Ö –∞–≤—Ç–æ</b> –∏ –≤–∑–ª–æ–º–∞–π—Ç–µ –∑–∞–º–∫–∏ —Å—É–º–º–∞—Ä–Ω–æ 15 —Ä–∞–∑. –û–±–∞ –≤–∏–¥–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∑–∞—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤–º–µ—Å—Ç–µ.',
        base:2, vip:4
      },
      {
        id:'f09',
        name:'–ó–∞–∫—Ä—ã—Ç—å 5 –∫–æ–¥–æ–≤ –≤ —Å–∏–ª–æ–≤—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö',
        hint:'–†–∞–±–æ—Ç–∞—è –≤ <b>LSPD, LSSD –∏–ª–∏ –¥—Ä—É–≥–æ–π —Å–∏–ª–æ–≤–æ–π —Ñ—Ä–∞–∫—Ü–∏–∏</b>, –æ—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ 5 –≤—ã–∑–æ–≤–æ–≤ —Ç–∏–ø–∞ "–ö–æ–¥-0" (–∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã—Ö) –∏ –∑–∞–∫—Ä–æ–π—Ç–µ –∏—Ö.',
        base:2, vip:4
      },
      {
        id:'f10',
        name:'–ü–æ—Å—Ç–∞–≤–∏—Ç—å 2 –∞–≤—Ç–æ –Ω–∞ —É—á—ë—Ç (LSPD)',
        hint:'–†–∞–±–æ—Ç–∞—è –≤ <b>LSPD</b>, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∏ –ø–æ—Å—Ç–∞–≤—å—Ç–µ –Ω–∞ —É—á—ë—Ç 2 —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤–∞ –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤. –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É –Ω–∞ –ø–æ—Å—Ç—É.',
        base:1, vip:2
      },
      {
        id:'f11',
        name:'–ü—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ 1 –∞—Ä–µ—Å—Ç –≤ –ö–ü–ó',
        hint:'–†–∞–±–æ—Ç–∞—è –≤ <b>LSPD –∏–ª–∏ LSSD</b>, –∑–∞–¥–µ—Ä–∂–∏—Ç–µ –Ω–∞—Ä—É—à–∏—Ç–µ–ª—è –∏ –æ—Ñ–æ—Ä–º–∏—Ç–µ –∞—Ä–µ—Å—Ç –≤ –ö–ü–ó. –ù—É–∂–Ω–æ –¥–æ–≤–µ—Å—Ç–∏ –∑–∞–¥–µ—Ä–∂–∞–Ω–Ω–æ–≥–æ –¥–æ –∫–∞–º–µ—Ä—ã –∏ –∑–∞–≤–µ—Ä—à–∏—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ.',
        base:1, vip:2
      },
      {
        id:'f12',
        name:'–í—ã–∫—É–ø–∏—Ç—å 2 —á–µ–ª–æ–≤–µ–∫ –∏–∑ –ö–ü–ó (–∞–¥–≤–æ–∫–∞—Ç)',
        hint:'–†–∞–±–æ—Ç–∞—è <b>–∞–¥–≤–æ–∫–∞—Ç–æ–º</b> –≤ LSPD/LSSD, –æ—Ñ–æ—Ä–º–∏—Ç–µ –∑–∞–ª–æ–≥ –∏ –≤—ã–ø—É—Å—Ç–∏—Ç–µ 2 –∑–∞–∫–ª—é—á—ë–Ω–Ω—ã—Ö –∏–∑ –ö–ü–ó. –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–¥–≤–æ–∫–∞—Ç—Å–∫–∞—è –ª–∏—Ü–µ–Ω–∑–∏—è –≤–æ —Ñ—Ä–∞–∫—Ü–∏–∏.',
        base:2, vip:4
      },
    ]
  }
];

const TOTAL = CATS.reduce((s,c) => s + c.acts.length, 0);

const S = {
  checked: new Set(),
  hidden:  new Set(),
  balance: 0,
  vip:     false,
  x2:      false,
};

const CS_ORDER_KEY = 'bp_order';

function defaultOrder() {
  return CATS.flatMap(c => c.acts.map(a => a.id));
}

const ACT_MAP = {};
CATS.forEach(c => c.acts.forEach(a => { ACT_MAP[a.id] = {...a, catId: c.id}; }));

let ORDER = defaultOrder();

let _orderTimer = null;
function saveOrder() {
  clearTimeout(_orderTimer);
  _orderTimer = setTimeout(() => {
    const cs = window.Telegram?.WebApp?.CloudStorage;
    const val = JSON.stringify(ORDER);
    if (cs) cs.setItem(CS_ORDER_KEY, val);
    else { try { localStorage.setItem(CS_ORDER_KEY, val); } catch(_) {} }
  }, 600);
}

function loadOrder(cb) {
  const cs = window.Telegram?.WebApp?.CloudStorage;
  const apply = val => {
    if (val) {
      try {
        const arr = JSON.parse(val);
        const def = defaultOrder();
        const set = new Set(arr);
        if (arr.length === def.length && def.every(id => set.has(id))) ORDER = arr;
      } catch(_) {}
    }
    cb();
  };
  if (cs) cs.getItem(CS_ORDER_KEY, (err, val) => apply(err ? null : val));
  else { try { apply(localStorage.getItem(CS_ORDER_KEY)); } catch(_) { cb(); } }
}

const CS_KEY = 'bp_state';
const Store = {
  get(cb) {
    const cs = window.Telegram?.WebApp?.CloudStorage;
    if (cs) cs.getItem(CS_KEY, (err, val) => cb(err ? null : val));
    else cb(localStorage.getItem(CS_KEY));
  },
  set(val) {
    const cs = window.Telegram?.WebApp?.CloudStorage;
    if (cs) cs.setItem(CS_KEY, val);
    else { try { localStorage.setItem(CS_KEY, val); } catch(_) {} }
  },
};

function serializeState() {
  return JSON.stringify({
    checked: [...S.checked],
    hidden:  [...S.hidden],
    balance: S.balance,
    vip:     S.vip,
    x2:      S.x2,
  });
}

function deserializeState(raw) {
  if (!raw) return false;
  try {
    const d = JSON.parse(raw);
    S.checked = new Set(Array.isArray(d.checked) ? d.checked : []);
    S.hidden  = new Set(Array.isArray(d.hidden)  ? d.hidden  : []);
    S.balance = typeof d.balance === 'number' ? d.balance : 0;
    S.vip     = !!d.vip;
    S.x2      = !!d.x2;
    return true;
  } catch(_) { return false; }
}

let _saveTimer = null;
function scheduleSave() {
  clearTimeout(_saveTimer);
  _saveTimer = setTimeout(() => Store.set(serializeState()), 800);
}

function pts(a) {
  if (S.vip && S.x2) return a.vip * 2;
  if (S.vip || S.x2) return a.vip;
  return a.base;
}

function calc() {
  let base=0, bonus=0, cnt=0, visibleCnt=0;
  CATS.forEach(c => c.acts.forEach(a => {
    if (S.hidden.has(a.id)) return;
    visibleCnt++;
    if (!S.checked.has(a.id)) return;
    base  += a.base;
    bonus += pts(a) - a.base;
    cnt++;
  }));
  return { base, bonus, earned:base+bonus, total:base+bonus+S.balance, cnt, visibleCnt };
}

const openHints = new Set();

function makeActWrap(a) {
  const wrap = document.createElement('div');
  wrap.className = 'act-wrap';
  wrap.id = 'aw-'+a.id;

  const row = document.createElement('div');
  row.className = 'act';
  row.dataset.id = a.id;
  row.innerHTML = `
    <div class="chkbox"><span class="chk-ico">‚úì</span></div>
    <span class="act-name">${a.name}</span>
    <span class="act-pts" id="ap-${a.id}">${a.base}</span>
    <button class="hint-btn" data-hid="${a.id}" aria-label="–ü–æ–¥—Å–∫–∞–∑–∫–∞">
      <svg width="14" height="14" viewBox="0 0 14 14" fill="none" style="color:inherit">
        <circle cx="7" cy="7" r="6.25" stroke="currentColor" stroke-width="1.5"/>
        <path d="M5.5 5.25C5.5 4.42 6.17 3.75 7 3.75C7.83 3.75 8.5 4.42 8.5 5.25C8.5 5.88 8.12 6.42 7.57 6.68C7.23 6.84 7 7.17 7 7.54V8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        <circle cx="7" cy="10" r="0.75" fill="currentColor"/>
      </svg>
    </button>`;

  const panel = document.createElement('div');
  panel.className = 'hint-panel';
  panel.id = 'hp-'+a.id;
  panel.innerHTML = `<div class="hint-inner"><span class="hint-icon">üí°</span><span class="hint-text">${a.hint}</span></div>`;

  row.addEventListener('click', e => { if (!e.target.closest('.hint-btn')) toggle(a.id); });
  row.querySelector('.hint-btn').addEventListener('click', e => { e.stopPropagation(); toggleHint(a.id); });

  wrap.appendChild(row);
  wrap.appendChild(panel);
  return wrap;
}

function build() {
  const root = document.getElementById('root');
  root.innerHTML = '';
  CATS.forEach(c => {
    const sec = document.createElement('div');
    sec.className = 'sec';
    sec.dataset.catId = c.id;
    sec.innerHTML = `
      <div class="sec-hdr">
        <span class="sec-ico">${c.icon}</span>
        <span class="sec-name">${c.name}</span>
        <div class="sec-sep"></div>
        <span class="sec-sum" id="ss-${c.id}">0</span>
      </div>
      <div class="acts" id="al-${c.id}"></div>`;
    root.appendChild(sec);
    const list = document.getElementById('al-'+c.id);
    const catIds = new Set(c.acts.map(a => a.id));
    ORDER.filter(id => catIds.has(id)).forEach(id => {
      const a = ACT_MAP[id];
      if (a) list.appendChild(makeActWrap(a));
    });
  });
  refreshMain();
}

function rebuildOrder() {
  CATS.forEach(c => {
    const list = document.getElementById('al-'+c.id);
    if (!list) return;
    const catIds = new Set(c.acts.map(a => a.id));
    ORDER.filter(id => catIds.has(id)).forEach(id => {
      const wrap = document.getElementById('aw-'+id);
      if (wrap) list.appendChild(wrap);
    });
  });
}

const DRAG_SVG = `<svg width="12" height="18" viewBox="0 0 12 18" fill="none">
  <circle cx="3.5" cy="3.5"  r="1.5" fill="currentColor"/>
  <circle cx="8.5" cy="3.5"  r="1.5" fill="currentColor"/>
  <circle cx="3.5" cy="9"    r="1.5" fill="currentColor"/>
  <circle cx="8.5" cy="9"    r="1.5" fill="currentColor"/>
  <circle cx="3.5" cy="14.5" r="1.5" fill="currentColor"/>
  <circle cx="8.5" cy="14.5" r="1.5" fill="currentColor"/>
</svg>`;

function makeStgRow(a) {
  const row = document.createElement('div');
  row.className = 'stg-row' + (S.hidden.has(a.id) ? ' hidden-row' : '');
  row.id = 'sr-'+a.id;
  row.dataset.actId = a.id;
  row.innerHTML = `
    <div class="stg-drag">${DRAG_SVG}</div>
    <span class="stg-row-name">${a.name}</span>
    <span class="stg-row-pts">${a.base}/${a.vip}</span>
    <div class="stg-sw ${S.hidden.has(a.id) ? '' : 'on'}" id="stgsw-${a.id}">
      <div class="stg-sw-k"></div>
    </div>`;
  row.querySelector('.stg-sw').addEventListener('click', () => toggleHidden(a.id));
  attachDragHandle(row.querySelector('.stg-drag'), row);
  return row;
}

function buildSettings() {
  const root = document.getElementById('settingsRoot');
  root.innerHTML = '';
  CATS.forEach(c => {
    const sec = document.createElement('div');
    sec.className = 'stg-sec';
    sec.dataset.catId = c.id;
    const hdr = document.createElement('div');
    hdr.className = 'stg-sec-hdr';
    hdr.innerHTML = `
      <span class="stg-sec-name">${c.icon} ${c.name}</span>
      <div class="stg-bulk">
        <button class="stg-bulk-btn" data-cat="${c.id}" data-action="hide">–°–∫—Ä—ã—Ç—å –≤—Å–µ</button>
        <button class="stg-bulk-btn" data-cat="${c.id}" data-action="show">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ</button>
      </div>`;
    hdr.querySelectorAll('.stg-bulk-btn').forEach(btn =>
      btn.addEventListener('click', () => bulkToggle(btn.dataset.cat, btn.dataset.action === 'show'))
    );
    sec.appendChild(hdr);
    const catIds = new Set(c.acts.map(a => a.id));
    ORDER.filter(id => catIds.has(id)).forEach(id => {
      const a = ACT_MAP[id];
      if (a) sec.appendChild(makeStgRow(a));
    });
    root.appendChild(sec);
  });
}

let dnd = null;

function attachDragHandle(handle, row) {
  handle.addEventListener('touchstart', e => startDrag(e, row), { passive: false });
  handle.addEventListener('mousedown',  e => startDrag(e, row));
}

function startDrag(e, row) {
  e.preventDefault();
  e.stopPropagation();
  const touch    = e.touches ? e.touches[0] : e;
  const rect     = row.getBoundingClientRect();
  const sec      = row.closest('.stg-sec');
  const catId    = sec.dataset.catId;
  const scrollEl = document.querySelector('.settings-scroll');

  tg?.HapticFeedback?.impactOccurred('medium');

  const a = ACT_MAP[row.dataset.actId];
  const clone = document.createElement('div');
  clone.className = 'stg-clone';
  clone.style.width = rect.width + 'px';
  clone.innerHTML = `
    <div class="stg-clone-handle">${DRAG_SVG}</div>
    <span class="stg-clone-name">${a ? a.name : ''}</span>
    <span class="stg-clone-pts">${a ? a.base+'/'+a.vip : ''}</span>
    <div class="stg-clone-sw ${S.hidden.has(a?.id) ? '' : 'on'}"></div>`;
  clone.style.transform = `translate(${rect.left}px,${rect.top}px) scale(1)`;
  clone.style.transition = 'none';
  document.body.appendChild(clone);

  requestAnimationFrame(() => {
    clone.style.transition = 'transform .15s cubic-bezier(.34,1.56,.64,1), box-shadow .15s';
    clone.style.transform  = `translate(${rect.left}px,${rect.top}px) scale(1.04)`;
    clone.style.boxShadow  = '0 24px 64px rgba(0,0,0,.85), 0 0 0 1.5px rgba(91,156,246,.35)';
  });

  row.classList.add('dnd-ghost');
  const allAtStart = [...sec.querySelectorAll('.stg-row')];

  dnd = {
    row, clone, sec, catId, scrollEl,
    originIndex:        allAtStart.indexOf(row),
    currentTargetIndex: allAtStart.indexOf(row),
    rowH:    rect.height + 4,
    offsetY: touch.clientY - rect.top,
    offsetX: touch.clientX - rect.left,
    getRows: () => [...sec.querySelectorAll('.stg-row:not(.dnd-ghost)')],
  };

  document.addEventListener('touchmove', onDragMove, { passive: false });
  document.addEventListener('touchend',  onDragEnd,  { passive: false });
  document.addEventListener('mousemove', onDragMove);
  document.addEventListener('mouseup',   onDragEnd);
}

function onDragMove(e) {
  if (!dnd) return;
  e.preventDefault();
  const touch   = e.touches ? e.touches[0] : e;
  const clientY = touch.clientY;
  const clientX = touch.clientX;

  dnd.clone.style.transition = 'box-shadow .15s';
  dnd.clone.style.transform  = `translate(${clientX - dnd.offsetX}px,${clientY - dnd.offsetY}px) scale(1.04)`;

  const sr = dnd.scrollEl.getBoundingClientRect();
  if      (clientY < sr.top    + 55) dnd.scrollEl.scrollTop -= 7;
  else if (clientY > sr.bottom - 55) dnd.scrollEl.scrollTop += 7;

  const rows = dnd.getRows();
  let targetIndex = rows.length;
  for (let i = 0; i < rows.length; i++) {
    const rr = rows[i].getBoundingClientRect();
    if (clientY < rr.top + rr.height / 2) { targetIndex = i; break; }
  }

  const allRows = [...dnd.sec.querySelectorAll('.stg-row')];
  const ghostIdx = allRows.indexOf(dnd.row);
  let absTarget = targetIndex;
  if (targetIndex > 0) {
    let nonGhostCount = 0;
    for (let i = 0; i < allRows.length; i++) {
      if (allRows[i] === dnd.row) continue;
      if (nonGhostCount === targetIndex) { absTarget = i; break; }
      nonGhostCount++;
      absTarget = i + 1;
    }
  }

  if (dnd.currentTargetIndex === absTarget) return;
  dnd.currentTargetIndex = absTarget;

  const h = dnd.rowH;
  allRows.forEach((r, i) => {
    if (r === dnd.row) return;
    let shift = 0;
    if (ghostIdx < absTarget) {
      if (i > ghostIdx && i < absTarget) shift = -h;
    } else {
      if (i >= absTarget && i < ghostIdx) shift = h;
    }
    r.style.transform = shift ? `translateY(${shift}px)` : '';
  });

  hSel();
}

function onDragEnd(e) {
  if (!dnd) return;
  document.removeEventListener('touchmove', onDragMove);
  document.removeEventListener('touchend',  onDragEnd);
  document.removeEventListener('mousemove', onDragMove);
  document.removeEventListener('mouseup',   onDragEnd);

  const { row, clone, sec, catId, currentTargetIndex } = dnd;

  [...sec.querySelectorAll('.stg-row')].forEach(r => { r.style.transform = ''; });
  row.classList.remove('dnd-ghost');

  const allRows = [...sec.querySelectorAll('.stg-row')];
  if (currentTargetIndex >= allRows.length) {
    const lastRow = allRows[allRows.length - 1];
    if (lastRow && lastRow !== row) lastRow.after(row);
  } else {
    const refRow = allRows[currentTargetIndex];
    if (refRow && refRow !== row) sec.insertBefore(row, refRow);
  }

  const finalRect = row.getBoundingClientRect();
  clone.style.transition = 'transform .2s cubic-bezier(.32,.72,0,1), opacity .18s, box-shadow .18s';
  clone.style.transform  = `translate(${finalRect.left}px,${finalRect.top}px) scale(1)`;
  clone.style.opacity    = '0';
  clone.style.boxShadow  = '0 4px 12px rgba(0,0,0,.4)';
  setTimeout(() => clone.remove(), 210);

  tg?.HapticFeedback?.impactOccurred('light');

  const cat = CATS.find(c => c.id === catId);
  if (cat) {
    const catIds = new Set(cat.acts.map(a => a.id));
    const newCatOrder = [...sec.querySelectorAll('.stg-row')]
      .map(r => r.dataset.actId)
      .filter(id => id && catIds.has(id));
    let ci = 0;
    ORDER = ORDER.map(id => catIds.has(id) ? newCatOrder[ci++] : id);
    rebuildOrder();
    saveOrder();
  }

  dnd = null;
}

function resetOrder() {
  ORDER = defaultOrder();
  saveOrder();
  rebuildOrder();
  const settEl = document.getElementById('settingsRoot');
  if (settEl && settEl.children.length) buildSettings();
  hNote();
}

function toggleHint(id) {
  const panel = document.getElementById('hp-'+id);
  const row   = document.querySelector(`.act[data-id="${id}"]`);
  const btn   = row?.querySelector('.hint-btn');
  if (!panel) return;
  if (openHints.has(id)) {
    openHints.delete(id);
    panel.classList.remove('open');
    row?.classList.remove('hint-open');
    btn?.classList.remove('open');
  } else {
    openHints.add(id);
    panel.classList.add('open');
    row?.classList.add('hint-open');
    btn?.classList.add('open');
    hSel();
  }
}

function toggleHidden(id) {
  if (S.hidden.has(id)) {
    S.hidden.delete(id);
  } else {
    S.hidden.add(id);
    S.checked.delete(id);
    if (openHints.has(id)) toggleHint(id);
  }
  const sw   = document.getElementById('stgsw-'+id);
  const sr   = document.getElementById('sr-'+id);
  const wrap = document.getElementById('aw-'+id);
  if (sw)   sw.classList.toggle('on', !S.hidden.has(id));
  if (sr)   sr.classList.toggle('hidden-row', S.hidden.has(id));
  if (wrap) wrap.style.display = S.hidden.has(id) ? 'none' : '';
  refreshMain();
  scheduleSave();
  hSel();
}

function bulkToggle(catId, show) {
  const cat = CATS.find(c => c.id === catId);
  if (!cat) return;
  cat.acts.forEach(a => {
    if (show) {
      S.hidden.delete(a.id);
    } else {
      S.hidden.add(a.id);
      S.checked.delete(a.id);
      if (openHints.has(a.id)) toggleHint(a.id);
    }
    const sw   = document.getElementById('stgsw-'+a.id);
    const sr   = document.getElementById('sr-'+a.id);
    const wrap = document.getElementById('aw-'+a.id);
    if (sw)   sw.classList.toggle('on', show);
    if (sr)   sr.classList.toggle('hidden-row', !show);
    if (wrap) wrap.style.display = show ? '' : 'none';
  });
  refreshMain();
  scheduleSave();
  hSel();
}

const _prev = {};
function bumpEl(id, num, txt) {
  const el = document.getElementById(id);
  if (!el || _prev[id] === num) return;
  _prev[id] = num;
  el.textContent = txt;
  el.style.transform = 'scale(1.1)';
  requestAnimationFrame(() => requestAnimationFrame(() => el.style.transform = ''));
}

function refreshMain() {
  const {base, bonus, earned, total, cnt, visibleCnt} = calc();
  CATS.forEach(c => {
    let sum = 0;
    c.acts.forEach(a => {
      if (S.hidden.has(a.id)) return;
      const el  = document.querySelector(`.act[data-id="${a.id}"]`);
      const ape = document.getElementById('ap-'+a.id);
      if (!el || !ape) return;
      const p  = pts(a);
      const on = S.checked.has(a.id);
      el.classList.toggle('chk',    on && !S.x2);
      el.classList.toggle('chk-x2', on &&  S.x2);
      ape.textContent = p;
      if (on) sum += p;
    });
    const ss = document.getElementById('ss-'+c.id);
    if (ss) { ss.textContent = sum ? '+'+sum : '0'; ss.classList.toggle('on', sum > 0); }
  });
  bumpEl('vBase',   base,   ''+base);
  bumpEl('vBonus',  bonus,  '+'+bonus);
  bumpEl('vEarned', earned, ''+earned);
  bumpEl('vTotal',  total,  ''+total);
  document.getElementById('pfill').style.width = (visibleCnt > 0 ? cnt/visibleCnt*100 : 0)+'%';
  document.getElementById('btnSettings').classList.toggle('settings-open', S.hidden.size > 0);
}

function toggle(id) {
  if (S.hidden.has(id)) return;
  const el = document.querySelector(`.act[data-id="${id}"]`);
  if (S.checked.has(id)) {
    S.checked.delete(id);
  } else {
    S.checked.add(id);
    if (el) {
      el.classList.add(S.x2 ? 'pulse-l' : 'pulse-g');
      setTimeout(() => el.classList.remove('pulse-g','pulse-l'), 400);
    }
    haptic();
  }
  refreshMain();
  scheduleSave();
}

function setVip(v) {
  S.vip = v;
  document.querySelectorAll('.vip-pill').forEach(b => {
    b.classList.remove('act-on','act-off');
    b.classList.add((b.dataset.v==='1')===v ? 'act-on' : 'act-off');
  });
  refreshMain();
  scheduleSave();
}

function setX2(v) {
  S.x2 = v;
  document.getElementById('x2Ben').classList.toggle('x2-on', v);
  document.getElementById('x2Txt').textContent = v ? '–≤–∫–ª' : '–≤—ã–∫–ª';
  refreshMain();
  scheduleSave();
}

function resetProgress() {
  S.checked.clear();
  S.balance = 0;
  Object.keys(_prev).forEach(k => delete _prev[k]);
  document.getElementById('balInp').value = '';
  setVip(S.vip); setX2(S.x2);
  scheduleSave();
  hNote();
}

function showAllActivities() {
  S.hidden.clear();
  CATS.forEach(c => c.acts.forEach(a => {
    const sw   = document.getElementById('stgsw-'+a.id);
    const sr   = document.getElementById('sr-'+a.id);
    const wrap = document.getElementById('aw-'+a.id);
    if (sw)   sw.classList.add('on');
    if (sr)   sr.classList.remove('hidden-row');
    if (wrap) wrap.style.display = '';
  }));
  refreshMain();
  scheduleSave();
  hSel();
}

document.getElementById('balInp').addEventListener('input', e => {
  S.balance = Math.max(0, Math.min(999999, parseInt(e.target.value)||0));
  refreshMain();
  scheduleSave();
});
document.querySelectorAll('.vip-pill').forEach(b =>
  b.addEventListener('click', () => setVip(b.dataset.v==='1'))
);
document.getElementById('x2Row').addEventListener('click', () => { setX2(!S.x2); hSel(); });
document.getElementById('btnSettings').addEventListener('click', () => {
  buildSettings();
  document.getElementById('settingsOverlay').classList.add('vis');
});
document.getElementById('btnCloseSettings').addEventListener('click', () =>
  document.getElementById('settingsOverlay').classList.remove('vis'));
document.getElementById('settingsOverlay').addEventListener('click', e => {
  if (e.target === e.currentTarget) e.currentTarget.classList.remove('vis');
});
document.getElementById('btnShowAll').addEventListener('click', showAllActivities);
document.getElementById('btnResetOrder').addEventListener('click', resetOrder);
document.getElementById('btnReset').addEventListener('click', () =>
  document.getElementById('modal').classList.add('vis'));
document.getElementById('mNo').addEventListener('click', () =>
  document.getElementById('modal').classList.remove('vis'));
document.getElementById('mYes').addEventListener('click', () => {
  document.getElementById('modal').classList.remove('vis');
  resetProgress();
});
document.getElementById('modal').addEventListener('click', e => {
  if (e.target === e.currentTarget) e.currentTarget.classList.remove('vis');
});

function showLoader(on) {
  document.getElementById('loader').style.display = on ? 'flex' : 'none';
  document.querySelector('.scroll').style.visibility = on ? 'hidden' : '';
  document.querySelector('.panel').style.visibility  = on ? 'hidden' : '';
}

function applyHiddenToDOM() {
  S.hidden.forEach(id => {
    const wrap = document.getElementById('aw-'+id);
    if (wrap) wrap.style.display = 'none';
  });
}

function applyModifiers() {
  document.querySelectorAll('.vip-pill').forEach(b => {
    b.classList.remove('act-on','act-off');
    b.classList.add((b.dataset.v==='1')===S.vip ? 'act-on' : 'act-off');
  });
  document.getElementById('x2Ben').classList.toggle('x2-on', S.x2);
  document.getElementById('x2Txt').textContent = S.x2 ? '–≤–∫–ª' : '–≤—ã–∫–ª';
  if (S.balance > 0) document.getElementById('balInp').value = S.balance;
}

showLoader(true);
const pState = new Promise(res => Store.get(raw => res(raw)));
const pOrder = new Promise(res => loadOrder(res));
Promise.all([pState, pOrder]).then(([raw]) => {
  deserializeState(raw);
  build();
  applyHiddenToDOM();
  applyModifiers();
  refreshMain();
  showLoader(false);
});
</script>
</body>
</html>
